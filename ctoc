#!/usr/bin/env bash
# CTOC - CTO Chief CLI Wrapper
# This script provides convenience commands for CTOC

set -euo pipefail

COMMAND="${1:-help}"

case "$COMMAND" in
    plan)
        echo "Entering planning mode..."
        echo ""
        echo "Tell Claude: 'ctoc plan' followed by your requirements."
        echo ""
        if command -v claude &> /dev/null; then
            claude --print "You are now in CTOC planning mode. Read CLAUDE.md and follow the Iron Loop methodology. Start with ASSESS phase."
        else
            echo "Claude CLI not found. Run 'claude' manually and type 'ctoc plan'"
        fi
        ;;
    implement)
        echo "Entering implementation mode..."
        echo ""
        echo "Tell Claude: 'ctoc implement' followed by what you want to build."
        ;;
    review)
        echo "Entering code review mode..."
        echo ""
        echo "Tell Claude: 'ctoc review' and it will review your code as a senior CTO."
        ;;
    improve)
        echo "Entering improvement mode..."
        echo ""
        echo "Tell Claude: 'ctoc improve' and it will suggest improvements."
        ;;
    init)
        echo "Initializing CTOC in current directory..."
        curl -sSL https://raw.githubusercontent.com/theaiguys/ctoc/main/install.sh | bash
        ;;
    help|--help|-h)
        cat << 'HELP'
CTOC - CTO Chief

Usage: ctoc <command>

Commands:
  init       Initialize CTOC in current directory
  plan       Enter planning mode
  implement  Enter implementation mode
  review     Enter code review mode
  improve    Enter improvement mode
  help       Show this help

After running a command, use Claude CLI or Claude.ai to interact.

Example:
  ctoc init          # Set up CTOC in your project
  claude             # Start Claude
  > ctoc plan        # Tell Claude to enter planning mode
  > I need a REST API for user management

HELP
        ;;
    *)
        echo "Unknown command: $COMMAND"
        echo "Run 'ctoc help' for usage."
        exit 1
        ;;
esac
